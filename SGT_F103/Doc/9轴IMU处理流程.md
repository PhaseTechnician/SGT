# IMU 处理过程
## 初始校准标定  
+ STEP1 水平校准  
IMU可能并非水平布置，避免Pitch和Roll影响磁力计的定向。
> 保持载具静止，多次采集三轴加速度。滤波后使用三轴结果向量和重力向量求解转换矩阵。【由转换矩阵导出Pitch和Roll的角度】
+ STEP2 地磁球面矫正  
地磁计可能由于车载的磁性材料和传感器自身误差，出现零偏和幅值异常，需要矫正。
> 使载具原地旋转，获取足够的样本之后进行单位球面矫正。受限于车辆运动自由度，实际只在水平面进行校准。
+ STEP3 地磁初值  
> 采集地磁计三轴数据，利用转换矩阵导出水平投影。投影的向量所指为磁正北。
+ STEP3.1 磁偏角
> 查表获得磁偏角，以便获得地理正北。
+ STEP4 散列估计  
卡尔曼滤波需要传感器的方差值，可以考虑实测来获取。
> 车辆静止，多次采集角速度和磁力计，统计散列方差
## 采集
对角速度积分，结合地磁计作为观测值。
计算系统的预测值。
融合两个正态分布。